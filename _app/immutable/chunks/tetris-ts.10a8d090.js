function N(T,G){for(var S=0;S<G.length;S++){const g=G[S];if(typeof g!="string"&&!Array.isArray(g)){for(const E in g)if(E!=="default"&&!(E in T)){const O=Object.getOwnPropertyDescriptor(g,E);O&&Object.defineProperty(T,E,O.get?O:{enumerable:!0,get:()=>g[E]})}}}return Object.freeze(Object.defineProperty(T,Symbol.toStringTag,{value:"Module"}))}function B(T){return T&&T.__esModule&&Object.prototype.hasOwnProperty.call(T,"default")?T.default:T}var A={},R={get exports(){return A},set exports(T){A=T}};(function(T,G){(function(S,g){T.exports=g()})(self,function(){return(()=>{var S={335:(m,h,u)=>{u.d(h,{Z:()=>l});var r=u(352),p=u.n(r)()(function(a){return a[1]});p.push([m.id,'#tetris{color:#fff}#tetris .container{display:flex;flex:1;height:100%;background-color:#000;font-family:"Lucida Console",Monaco,monospace}#tetris .main-panel{width:100%}#tetris .controls{padding:15px}#tetris .control-table{width:100%;font-size:.75em;border:1px solid blue;padding:5px}#tetris .control-table td{text-align:center}#tetris .label{font-weight:bold;font-size:.85em;padding:5px 0px;text-align:center;text-decoration:underline}#tetris .button{display:inline-block;background-color:#000;border:1px solid blue;padding:5px;margin:5px;cursor:pointer}#tetris .button:hover{background-color:blue}#tetris .text-center{text-align:center}#tetris .game-panel{display:flex;flex:1;background-color:#000}#tetris .game-board{flex:1;align-self:flex-end;border:1px solid rgba(255,255,255,.1);margin:15px 0px 15px 15px}#tetris .game-row{display:flex;width:100%}#tetris .game-space{flex:1;border:1px dashed rgba(255,255,255,.1)}#tetris .game-piece{border-width:1px;border-style:solid}#tetris .stats-panel{text-align:center}#tetris .stats-label{margin:5px 15px;font-size:.75em;text-decoration:underline}#tetris .stats-value{margin:5px 15px;font-size:.75em;margin-bottom:5px}#tetris .next-piece-container{margin:0px 5px;margin-top:15px;border:1px solid blue;display:flex;align-items:center;justify-content:center}#tetris .next-piece-cell{display:inline-block;border:1px solid #000}#tetris .paused{opacity:.5}',""]);const l=p},352:m=>{m.exports=function(h){var u=[];return u.toString=function(){return this.map(function(r){var p=h(r);return r[2]?"@media ".concat(r[2]," {").concat(p,"}"):p}).join("")},u.i=function(r,p,l){typeof r=="string"&&(r=[[null,r,""]]);var a={};if(l)for(var c=0;c<this.length;c++){var s=this[c][0];s!=null&&(a[s]=!0)}for(var i=0;i<r.length;i++){var t=[].concat(r[i]);l&&a[t[0]]||(p&&(t[2]?t[2]="".concat(p," and ").concat(t[2]):t[2]=p),u.push(t))}},u}},701:(m,h,u)=>{var r,p=function(){var f={};return function(y){if(f[y]===void 0){var d=document.querySelector(y);if(window.HTMLIFrameElement&&d instanceof window.HTMLIFrameElement)try{d=d.contentDocument.head}catch{d=null}f[y]=d}return f[y]}}(),l=[];function a(f){for(var y=-1,d=0;d<l.length;d++)if(l[d].identifier===f){y=d;break}return y}function c(f,y){for(var d={},v=[],x=0;x<f.length;x++){var P=f[x],_=y.base?P[0]+y.base:P[0],L=d[_]||0,b="".concat(_," ").concat(L);d[_]=L+1;var M=a(b),I={css:P[1],media:P[2],sourceMap:P[3]};M!==-1?(l[M].references++,l[M].updater(I)):l.push({identifier:b,updater:C(I,y),references:1}),v.push(b)}return v}function s(f){var y=document.createElement("style"),d=f.attributes||{};if(d.nonce===void 0){var v=u.nc;v&&(d.nonce=v)}if(Object.keys(d).forEach(function(P){y.setAttribute(P,d[P])}),typeof f.insert=="function")f.insert(y);else{var x=p(f.insert||"head");if(!x)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");x.appendChild(y)}return y}var i,t=(i=[],function(f,y){return i[f]=y,i.filter(Boolean).join(`
`)});function e(f,y,d,v){var x=d?"":v.media?"@media ".concat(v.media," {").concat(v.css,"}"):v.css;if(f.styleSheet)f.styleSheet.cssText=t(y,x);else{var P=document.createTextNode(x),_=f.childNodes;_[y]&&f.removeChild(_[y]),_.length?f.insertBefore(P,_[y]):f.appendChild(P)}}function n(f,y,d){var v=d.css,x=d.media,P=d.sourceMap;if(x?f.setAttribute("media",x):f.removeAttribute("media"),P&&typeof btoa<"u"&&(v+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(P))))," */")),f.styleSheet)f.styleSheet.cssText=v;else{for(;f.firstChild;)f.removeChild(f.firstChild);f.appendChild(document.createTextNode(v))}}var o=null,w=0;function C(f,y){var d,v,x;if(y.singleton){var P=w++;d=o||(o=s(y)),v=e.bind(null,d,P,!1),x=e.bind(null,d,P,!0)}else d=s(y),v=n.bind(null,d,y),x=function(){(function(_){if(_.parentNode===null)return!1;_.parentNode.removeChild(_)})(d)};return v(f),function(_){if(_){if(_.css===f.css&&_.media===f.media&&_.sourceMap===f.sourceMap)return;v(f=_)}else x()}}m.exports=function(f,y){(y=y||{}).singleton||typeof y.singleton=="boolean"||(y.singleton=(r===void 0&&(r=!!(window&&document&&document.all&&!window.atob)),r));var d=c(f=f||[],y);return function(v){if(v=v||[],Object.prototype.toString.call(v)==="[object Array]"){for(var x=0;x<d.length;x++){var P=a(d[x]);l[P].references--}for(var _=c(v,y),L=0;L<d.length;L++){var b=a(d[L]);l[b].references===0&&(l[b].updater(),l.splice(b,1))}d=_}}}},323:(m,h,u)=>{u.r(h),u.d(h,{default:()=>a});var r=u(701),p=u.n(r),l=u(335);p()(l.Z,{insert:"head",singleton:!1});const a=l.Z.locals||{}},913:(m,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.LINES_PER_LEVEL=h.FRAME_CONST=h.GAME_ROWS=h.GAME_COLS=h.COLORS=void 0,h.COLORS=[{color:"red",border:"darkred"},{color:"orange",border:"black"},{color:"yellow",border:"black"},{color:"lime",border:"darkgreen"},{color:"cyan",border:"darkblue"},{color:"blue",border:"darkblue"},{color:"magenta",border:"indigo"},{color:"indigo",border:"black"}],h.GAME_COLS=10,h.GAME_ROWS=20,h.FRAME_CONST=60.0988,h.LINES_PER_LEVEL=10},549:(m,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.EventBus=void 0;var u=function(){function r(){}return r.getInstance=function(){return r.instance||(r.instance=new r,r.instance.handlers=[]),r.instance},r.prototype.subscribe=function(p,l){this.handlers.push({event:p,handler:l})},r.prototype.publish=function(p){this.handlers.forEach(function(l){l.event===p.event&&l.handler(p)})},r.prototype.publishGamePieceEvent=function(p){this.handlers.forEach(function(l){l.event===p.event&&l.handler(p)})},r.prototype.publishRowEvent=function(p){this.handlers.forEach(function(l){l.event===p.event&&l.handler(p)})},r.prototype.publishStatsEvent=function(p){this.handlers.forEach(function(l){l.event===p.event&&l.handler(p)})},r}();h.EventBus=u},629:(m,h,u)=>{Object.defineProperty(h,"__esModule",{value:!0});var r=u(913),p=u(234),l=u(310),a=u(549),c=function(){function s(i,t){this.parseOptions(t),this.statsCallback=i,this.eventBus=a.EventBus.getInstance(),this.subscribeToEvents(),this.resetGame()}return s.prototype.parseOptions=function(i){if(!i)return this.frameConst=r.FRAME_CONST,void(this.linesPerLevel=r.LINES_PER_LEVEL);this.frameConst=i.frameConstant>0?i.frameConstant:r.FRAME_CONST,this.linesPerLevel=i.linesPerLevel>0?i.linesPerLevel:r.LINES_PER_LEVEL},s.prototype.subscribeToEvents=function(){var i=this;this.eventBus.subscribe("PLAY",function(){i.startGame()}),this.eventBus.subscribe("INPUT_LEFT",function(){i.moveLeft()}),this.eventBus.subscribe("INPUT_RIGHT",function(){i.moveRight()}),this.eventBus.subscribe("INPUT_DOWN",function(){i.moveDown()}),this.eventBus.subscribe("INPUT_UP",function(){i.transform()}),this.eventBus.subscribe("INPUT_ENTER",function(){i.drop()}),this.eventBus.subscribe("INPUT_SPACE",function(){i.togglePauseGame()}),this.eventBus.subscribe("INPUT_ESC",function(){i.gameState!==p.GameState.PLAYING&&i.gameState!==p.GameState.PAUSED||(i.gameState=p.GameState.STOPPED)})},s.prototype.initStateMap=function(){this.stateMap=[];for(var i=0;i<r.GAME_ROWS;i++){this.stateMap[i]=[];for(var t=0;t<r.GAME_COLS;t++)this.stateMap[i][t]=!1}},s.prototype.resetGame=function(){this.initStateMap(),this.points=0,this.lineCount=0,this.level=0,this.gameState=p.GameState.INIT},s.prototype.startGame=function(){console.log("[tetris-ts] Starting Game"),this.gameState=p.GameState.PLAYING,this.activePiece=null,this.nextPiece=null,this.points=0,this.eventBus.publishStatsEvent({event:"UPDATE_POINTS",value:this.points}),this.lineCount=0,this.eventBus.publishStatsEvent({event:"UPDATE_LINES",value:this.lineCount}),this.level=0,this.eventBus.publishStatsEvent({event:"UPDATE_LEVEL",value:this.level}),this.run()},s.prototype.togglePauseGame=function(){this.gameState===p.GameState.PLAYING?this.gameState=p.GameState.PAUSED:this.gameState===p.GameState.PAUSED&&(this.gameState=p.GameState.PLAYING,this.run())},s.prototype.endGame=function(){this.gameState=p.GameState.STOPPED,this.activePiece=null,this.nextPiece=null,this.statsCallback({points:this.points,lines:this.lineCount,level:this.level}),this.resetGame()},s.prototype.run=function(){var i=this;this.gameState==p.GameState.PLAYING?this.activePiece&&this.validateTransform(this.activePiece.getDownTransform())?(this.moveDown(),setTimeout(function(){i.run()},this.getTimeout())):this.activePiece?(this.activePiece.locking=!0,setTimeout(function(){i.activePiece.locking&&(i.activePiece=null,i.checkCompleteRows(),i.generateGamePiece()),setTimeout(function(){i.run()},i.getTimeout())},this.getTimeout())):(this.generateGamePiece(),setTimeout(function(){i.run()},this.getTimeout())):this.gameState!==p.GameState.PAUSED&&this.endGame()},s.prototype.generateGamePiece=function(){this.nextPiece||(this.nextPiece=l.newGamePiece()),this.validateGamePiece(this.nextPiece.position)||(this.gameState=p.GameState.STOPPED),this.activePiece=this.nextPiece,this.addToStateMap(this.activePiece),this.eventBus.publishGamePieceEvent({event:"DRAW_ACTIVE",gamePiece:this.activePiece}),this.nextPiece=l.newGamePiece(),this.eventBus.publishGamePieceEvent({event:"DRAW_NEXT",gamePiece:this.nextPiece})},s.prototype.validateGamePiece=function(i){var t=this,e=!0;return i.forEach(function(n){t.stateMap[n.y][n.x]&&(e=!1)}),e},s.prototype.checkCompleteRows=function(){for(var i=this,t=[],e=0;e<r.GAME_ROWS;e++){for(var n=0,o=0;o<r.GAME_COLS;o++)this.stateMap[e][o]&&n++;n===r.GAME_COLS&&t.push(e)}t.length&&(t.forEach(function(w){i.stateMap.splice(w,1);for(var C=[],f=0;f<r.GAME_COLS;f++)C.push(!1);i.stateMap.unshift(C)}),this.calculateRowPoints(t.length),this.eventBus.publishRowEvent({event:"REMOVE_ROWS",rows:t}))},s.prototype.addToStateMap=function(i){var t=this;i.position.forEach(function(e){t.stateMap[e.y][e.x]=!0})},s.prototype.removeFromStateMap=function(i){var t=this;i.position.forEach(function(e){t.stateMap[e.y][e.x]=!1})},s.prototype.moveLeft=function(){if(this.gameState==p.GameState.PLAYING){var i=this.activePiece.getLeftTransform();this.validateTransform(i)&&(this.removeFromStateMap(this.activePiece),this.eventBus.publishGamePieceEvent({event:"ERASE_ACTIVE",gamePiece:this.activePiece}),this.activePiece.position=i,this.addToStateMap(this.activePiece),this.eventBus.publishGamePieceEvent({event:"DRAW_ACTIVE",gamePiece:this.activePiece}),this.activePiece.locking&&this.lockCheck())}},s.prototype.moveRight=function(){if(this.gameState==p.GameState.PLAYING){var i=this.activePiece.getRightTransform();this.validateTransform(i)&&(this.removeFromStateMap(this.activePiece),this.eventBus.publishGamePieceEvent({event:"ERASE_ACTIVE",gamePiece:this.activePiece}),this.activePiece.position=i,this.addToStateMap(this.activePiece),this.eventBus.publishGamePieceEvent({event:"DRAW_ACTIVE",gamePiece:this.activePiece}),this.activePiece.locking&&this.lockCheck())}},s.prototype.moveDown=function(){if(this.gameState==p.GameState.PLAYING){var i=this.activePiece.getDownTransform();this.validateTransform(i)&&(this.removeFromStateMap(this.activePiece),this.eventBus.publishGamePieceEvent({event:"ERASE_ACTIVE",gamePiece:this.activePiece}),this.activePiece.position=i,this.addToStateMap(this.activePiece),this.eventBus.publishGamePieceEvent({event:"DRAW_ACTIVE",gamePiece:this.activePiece}),this.activePiece.locking&&this.lockCheck())}},s.prototype.drop=function(){if(this.gameState==p.GameState.PLAYING){var i=this.activePiece.getDownTransform();if(this.validateTransform(i)){var t=this.activePiece.clonePosition();this._getDropTransform();var e=this.activePiece.clonePosition();this.activePiece.position=t,this.removeFromStateMap(this.activePiece),this.eventBus.publishGamePieceEvent({event:"ERASE_ACTIVE",gamePiece:this.activePiece}),this.activePiece.position=e,this.addToStateMap(this.activePiece),this.eventBus.publishGamePieceEvent({event:"DRAW_ACTIVE",gamePiece:this.activePiece}),this.activePiece.locking&&this.lockCheck()}}},s.prototype._getDropTransform=function(){var i=this.activePiece.getDownTransform();if(this.validateTransform(i))return this.activePiece.position=i,this._getDropTransform()},s.prototype.lockCheck=function(){this.validateTransform(this.activePiece.getDownTransform())&&(this.activePiece.locking=!1)},s.prototype.transform=function(){if(this.gameState==p.GameState.PLAYING){var i=this.activePiece.getTransform();this.validateTransform(i)&&(this.removeFromStateMap(this.activePiece),this.eventBus.publishGamePieceEvent({event:"ERASE_ACTIVE",gamePiece:this.activePiece}),this.activePiece.position=i,this.addToStateMap(this.activePiece),this.eventBus.publishGamePieceEvent({event:"DRAW_ACTIVE",gamePiece:this.activePiece}))}},s.prototype.validateTransform=function(i){var t=this,e=!0;return i.forEach(function(n){t.validateCoordinateTransform(n)||(e=!1)}),e},s.prototype.validateCoordinateTransform=function(i){try{if(this.isActivePiece(i))throw!0;if(i.x<0||i.x>=r.GAME_COLS||i.y<0||i.y>=r.GAME_ROWS||this.stateMap[i.y][i.x])throw!1;return!0}catch(t){return t}},s.prototype.isActivePiece=function(i){try{return this.activePiece.position.forEach(function(t){if(i.x==t.x&&i.y==t.y)throw!0}),!1}catch(t){return t}},s.prototype.getTimeout=function(){return this.level<9?(48-5*this.level)/this.frameConst*1e3:this.level===9?6/this.frameConst*1e3:this.level>=10&&this.level<13?5/this.frameConst*1e3:this.level>=13&&this.level<16?4/this.frameConst*1e3:this.level>=16&&this.level<19?3/this.frameConst*1e3:this.level>=19&&this.level<29?2/this.frameConst*1e3:1/this.frameConst*1e3},s.prototype.calculateRowPoints=function(i){var t;switch(i){case 1:t=40;break;case 2:t=100;break;case 3:t=300;break;case 4:t=1200}this.points+=t*(this.level+1),this.eventBus.publishStatsEvent({event:"UPDATE_POINTS",value:this.points}),this.lineCount=this.lineCount+i,this.eventBus.publishStatsEvent({event:"UPDATE_LINES",value:this.lineCount}),this.lineCount>=(this.level+1)*this.linesPerLevel&&(this.level++,this.eventBus.publishStatsEvent({event:"UPDATE_LEVEL",value:this.level}))},s}();h.default=c},489:function(m,h,u){var r,p=this&&this.__extends||(r=function(s,i){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(s,i)},function(s,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function t(){this.constructor=s}r(s,i),s.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)});Object.defineProperty(h,"__esModule",{value:!0});var l=u(418),a=u(310),c=function(s){function i(){var t=s.call(this,a.GamePieceType.BLOCK)||this;return t.position=[{x:t.xOffset,y:0},{x:t.xOffset+1,y:0},{x:t.xOffset,y:1},{x:t.xOffset+1,y:1}],t.nextPieceMap=[{x:0,y:0},{x:1,y:0},{x:0,y:1},{x:1,y:1}],t.nextPieceDims={rows:2,cols:2},t}return p(i,s),i}(l.default);h.default=c},418:(m,h,u)=>{Object.defineProperty(h,"__esModule",{value:!0});var r=u(913),p=function(){function l(a){this.type=a,this.cols=r.GAME_COLS,this.rows=r.GAME_ROWS,this.xOffset=(r.GAME_COLS/2%2?r.GAME_COLS/2:r.GAME_COLS/2-r.GAME_COLS%2)-1,this.color=r.COLORS[Math.floor(Math.random()*Math.floor(r.COLORS.length))]}return l.prototype.getLeftTransform=function(){var a=[];return this.position.forEach(function(c){a.push({x:c.x-1,y:c.y})}),a},l.prototype.getRightTransform=function(){var a=[];return this.position.forEach(function(c){a.push({x:c.x+1,y:c.y})}),a},l.prototype.getDownTransform=function(){var a=[];return this.position.forEach(function(c){a.push({x:c.x,y:c.y+1})}),a},l.prototype.getTransform=function(){return this.position},l.prototype.clonePosition=function(){return this.position.map(function(a){var c={x:void 0,y:void 0};return Object.assign(c,a),c})},l}();h.default=p},465:function(m,h,u){var r,p=this&&this.__extends||(r=function(s,i){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(s,i)},function(s,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function t(){this.constructor=s}r(s,i),s.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)});Object.defineProperty(h,"__esModule",{value:!0});var l=u(418),a=u(310),c=function(s){function i(){var t=s.call(this,a.GamePieceType.L_INV)||this;return t.position=[{x:t.xOffset-1,y:0},{x:t.xOffset,y:0},{x:t.xOffset+1,y:0},{x:t.xOffset+1,y:1}],t.nextPieceMap=[{x:0,y:0},{x:1,y:0},{x:2,y:0},{x:2,y:1}],t.nextPieceDims={rows:2,cols:3},t}return p(i,s),i.prototype.getTransform=function(){return this.position[2].y===this.position[3].y?this.position[2].x>this.position[3].x?this._180Transform():this._0Transform():this.position[2].y<this.position[3].y?this._90Transform():this._270Transform()},i.prototype._0Transform=function(t,e){t=t||0,e=e||0;for(var n=[{x:this.position[0].x+t,y:this.position[0].y-2+e},{x:this.position[1].x+1+t,y:this.position[1].y-1+e},{x:this.position[2].x+2+t,y:this.position[2].y+e},{x:this.position[3].x+1+t,y:this.position[3].y+1+e}],o=0;o<n.length;o++){if(n[o].x<0)return this._0Transform(++t,e);if(n[o].x>=this.cols)return this._0Transform(--t,e);if(n[o].y<0)return this._0Transform(t,++e);if(n[o].y>=this.rows)return this._0Transform(t,--e)}return n},i.prototype._90Transform=function(t,e){t=t||0,e=e||0;for(var n=[{x:this.position[0].x+2+t,y:this.position[0].y+e},{x:this.position[1].x+1+t,y:this.position[1].y+1+e},{x:this.position[2].x+t,y:this.position[2].y+2+e},{x:this.position[3].x-1+t,y:this.position[3].y+1+e}],o=0;o<n.length;o++){if(n[o].x<0)return this._90Transform(++t,e);if(n[o].x>=this.cols)return this._90Transform(--t,e);if(n[o].y<0)return this._90Transform(t,++e);if(n[o].y>=this.rows)return this._90Transform(t,--e)}return n},i.prototype._180Transform=function(t,e){t=t||0,e=e||0;for(var n=[{x:this.position[0].x+t,y:this.position[0].y+2+e},{x:this.position[1].x-1+t,y:this.position[1].y+1+e},{x:this.position[2].x-2+t,y:this.position[2].y+e},{x:this.position[3].x-1+t,y:this.position[3].y-1+e}],o=0;o<n.length;o++){if(n[o].x<0)return this._180Transform(++t,e);if(n[o].x>=this.cols)return this._180Transform(--t,e);if(n[o].y<0)return this._180Transform(t,++e);if(n[o].y>=this.rows)return this._180Transform(t,--e)}return n},i.prototype._270Transform=function(t,e){t=t||0,e=e||0;for(var n=[{x:this.position[0].x-2+t,y:this.position[0].y+e},{x:this.position[1].x-1+t,y:this.position[1].y-1+e},{x:this.position[2].x+t,y:this.position[2].y-2+e},{x:this.position[3].x+1+t,y:this.position[3].y-1+e}],o=0;o<n.length;o++){if(n[o].x<0)return this._270Transform(++t,e);if(n[o].x>=this.cols)return this._270Transform(--t,e);if(n[o].y<0)return this._270Transform(t,++e);if(n[o].y>=this.rows)return this._270Transform(t,--e)}return n},i}(l.default);h.default=c},852:function(m,h,u){var r,p=this&&this.__extends||(r=function(s,i){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(s,i)},function(s,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function t(){this.constructor=s}r(s,i),s.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)});Object.defineProperty(h,"__esModule",{value:!0});var l=u(418),a=u(310),c=function(s){function i(){var t=s.call(this,a.GamePieceType.L)||this;return t.position=[{x:t.xOffset-1,y:0},{x:t.xOffset,y:0},{x:t.xOffset+1,y:0},{x:t.xOffset-1,y:1}],t.nextPieceMap=[{x:0,y:0},{x:1,y:0},{x:2,y:0},{x:0,y:1}],t.nextPieceDims={rows:2,cols:3},t}return p(i,s),i.prototype.getTransform=function(){return this.position[0].y===this.position[3].y?this.position[0].x>this.position[3].x?this._180Transform():this._0Transform():this.position[0].y<this.position[3].y?this._90Transform():this._270Transform()},i.prototype._0Transform=function(t,e){t=t||0,e=e||0;for(var n=[{x:this.position[0].x+t,y:this.position[0].y-2+e},{x:this.position[1].x+1+t,y:this.position[1].y-1+e},{x:this.position[2].x+2+t,y:this.position[2].y+e},{x:this.position[3].x-1+t,y:this.position[3].y-1+e}],o=0;o<n.length;o++){if(n[o].x<0)return this._0Transform(++t,e);if(n[o].x>=this.cols)return this._0Transform(--t,e);if(n[o].y<0)return this._0Transform(t,++e);if(n[o].y>=this.rows)return this._0Transform(t,--e)}return n},i.prototype._90Transform=function(t,e){t=t||0,e=e||0;for(var n=[{x:this.position[0].x+2+t,y:this.position[0].y+e},{x:this.position[1].x+1+t,y:this.position[1].y+1+e},{x:this.position[2].x+t,y:this.position[2].y+2+e},{x:this.position[3].x+1+t,y:this.position[3].y-1+e}],o=0;o<n.length;o++){if(n[o].x<0)return this._90Transform(++t,e);if(n[o].x>=this.cols)return this._90Transform(--t,e);if(n[o].y<0)return this._90Transform(t,++e);if(n[o].y>=this.rows)return this._90Transform(t,--e)}return n},i.prototype._180Transform=function(t,e){t=t||0,e=e||0;for(var n=[{x:this.position[0].x+t,y:this.position[0].y+2+e},{x:this.position[1].x-1+t,y:this.position[1].y+1+e},{x:this.position[2].x-2+t,y:this.position[2].y+e},{x:this.position[3].x+1+t,y:this.position[3].y+1+e}],o=0;o<n.length;o++){if(n[o].x<0)return this._180Transform(++t,e);if(n[o].x>=this.cols)return this._180Transform(--t,e);if(n[o].y<0)return this._180Transform(t,++e);if(n[o].y>=this.rows)return this._180Transform(t,--e)}return n},i.prototype._270Transform=function(t,e){t=t||0,e=e||0;for(var n=[{x:this.position[0].x-2+t,y:this.position[0].y+e},{x:this.position[1].x-1+t,y:this.position[1].y-1+e},{x:this.position[2].x+t,y:this.position[2].y-2+e},{x:this.position[3].x-1+t,y:this.position[3].y+1+e}],o=0;o<n.length;o++){if(n[o].x<0)return this._270Transform(++t,e);if(n[o].x>=this.cols)return this._270Transform(--t,e);if(n[o].y<0)return this._270Transform(t,++e);if(n[o].y>=this.rows)return this._270Transform(t,--e)}return n},i}(l.default);h.default=c},376:function(m,h,u){var r,p=this&&this.__extends||(r=function(s,i){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(s,i)},function(s,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function t(){this.constructor=s}r(s,i),s.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)});Object.defineProperty(h,"__esModule",{value:!0});var l=u(418),a=u(310),c=function(s){function i(){var t=s.call(this,a.GamePieceType.LINE)||this;return t.position=[{x:t.xOffset-1,y:0},{x:t.xOffset,y:0},{x:t.xOffset+1,y:0},{x:t.xOffset+2,y:0}],t.nextPieceMap=[{x:0,y:0},{x:1,y:0},{x:2,y:0},{x:3,y:0}],t.nextPieceDims={rows:1,cols:4},t}return p(i,s),i.prototype.getTransform=function(){return this.position[0].y===this.position[1].y?this._verticalTransform():this._horizontalTransform()},i.prototype._horizontalTransform=function(t,e){t=t||0,e=e||0;for(var n=[{x:this.position[0].x-1+t,y:this.position[0].y+3+e},{x:this.position[1].x+t,y:this.position[1].y+2+e},{x:this.position[2].x+1+t,y:this.position[2].y+1+e},{x:this.position[3].x+2+t,y:this.position[3].y+e}],o=0;o<n.length;o++){if(n[o].x<0)return this._horizontalTransform(++t,e);if(n[o].x>=this.cols)return this._horizontalTransform(--t,e);if(n[o].y<0)return this._horizontalTransform(t,++e);if(n[o].y>=this.rows)return this._horizontalTransform(t,--e)}return n},i.prototype._verticalTransform=function(t,e){t=t||0,e=e||0;for(var n=[{x:this.position[0].x+1+t,y:this.position[0].y-3+e},{x:this.position[1].x+t,y:this.position[1].y-2+e},{x:this.position[2].x-1+t,y:this.position[2].y-1+e},{x:this.position[3].x-2+t,y:this.position[3].y+e}],o=0;o<n.length;o++){if(n[o].x<0)return this._verticalTransform(++t,e);if(n[o].x>=this.cols)return this._verticalTransform(--t,e);if(n[o].y<0)return this._verticalTransform(t,++e);if(n[o].y>=this.rows)return this._verticalTransform(t,--e)}return n},i}(l.default);h.default=c},146:function(m,h,u){var r,p=this&&this.__extends||(r=function(s,i){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(s,i)},function(s,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function t(){this.constructor=s}r(s,i),s.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)});Object.defineProperty(h,"__esModule",{value:!0});var l=u(418),a=u(310),c=function(s){function i(){var t=s.call(this,a.GamePieceType.T)||this;return t.position=[{x:t.xOffset-1,y:0},{x:t.xOffset,y:0},{x:t.xOffset+1,y:0},{x:t.xOffset,y:1}],t.nextPieceMap=[{x:0,y:0},{x:1,y:0},{x:2,y:0},{x:1,y:1}],t.nextPieceDims={rows:2,cols:3},t}return p(i,s),i.prototype.getTransform=function(){return this.position[3].y===this.position[1].y?this.position[3].x<this.position[1].x?this._180Transform():this._0Transform():this.position[3].y>this.position[1].y?this._90Transform():this._270Transform()},i.prototype._0Transform=function(t,e){t=t||0,e=e||0;for(var n=[{x:this.position[0].x+t,y:this.position[0].y-2+e},{x:this.position[1].x+1+t,y:this.position[1].y-1+e},{x:this.position[2].x+2+t,y:this.position[2].y+e},{x:this.position[3].x+t,y:this.position[3].y+e}],o=0;o<n.length;o++){if(n[o].x<0)return this._0Transform(++t,e);if(n[o].x>=this.cols)return this._0Transform(--t,e);if(n[o].y<0)return this._0Transform(t,++e);if(n[o].y>=this.rows)return this._0Transform(t,--e)}return n},i.prototype._90Transform=function(t,e){t=t||0,e=e||0;for(var n=[{x:this.position[0].x+2+t,y:this.position[0].y+e},{x:this.position[1].x+1+t,y:this.position[1].y+1+e},{x:this.position[2].x+t,y:this.position[2].y+2+e},{x:this.position[3].x+t,y:this.position[3].y+e}],o=0;o<n.length;o++){if(n[o].x<0)return this._90Transform(++t,e);if(n[o].x>=this.cols)return this._90Transform(--t,e);if(n[o].y<0)return this._90Transform(t,++e);if(n[o].y>=this.rows)return this._90Transform(t,--e)}return n},i.prototype._180Transform=function(t,e){t=t||0,e=e||0;for(var n=[{x:this.position[0].x+t,y:this.position[0].y+2+e},{x:this.position[1].x-1+t,y:this.position[1].y+1+e},{x:this.position[2].x-2+t,y:this.position[2].y+e},{x:this.position[3].x+t,y:this.position[3].y+e}],o=0;o<n.length;o++){if(n[o].x<0)return this._180Transform(++t,e);if(n[o].x>=this.cols)return this._180Transform(--t,e);if(n[o].y<0)return this._180Transform(t,++e);if(n[o].y>=this.rows)return this._180Transform(t,--e)}return n},i.prototype._270Transform=function(t,e){t=t||0,e=e||0;for(var n=[{x:this.position[0].x-2+t,y:this.position[0].y+e},{x:this.position[1].x-1+t,y:this.position[1].y-1+e},{x:this.position[2].x+t,y:this.position[2].y-2+e},{x:this.position[3].x+t,y:this.position[3].y+e}],o=0;o<n.length;o++){if(n[o].x<0)return this._270Transform(++t,e);if(n[o].x>=this.cols)return this._270Transform(--t,e);if(n[o].y<0)return this._270Transform(t,++e);if(n[o].y>=this.rows)return this._270Transform(t,--e)}return n},i}(l.default);h.default=c},935:function(m,h,u){var r,p=this&&this.__extends||(r=function(s,i){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(s,i)},function(s,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function t(){this.constructor=s}r(s,i),s.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)});Object.defineProperty(h,"__esModule",{value:!0});var l=u(418),a=u(310),c=function(s){function i(){var t=s.call(this,a.GamePieceType.Z_INV)||this;return t.position=[{x:t.xOffset,y:0},{x:t.xOffset+1,y:0},{x:t.xOffset-1,y:1},{x:t.xOffset,y:1}],t.nextPieceMap=[{x:1,y:0},{x:2,y:0},{x:0,y:1},{x:1,y:1}],t.nextPieceDims={rows:2,cols:3},t}return p(i,s),i.prototype.getTransform=function(){return this.position[0].y===this.position[1].y?this._verticalTransform():this._horizontalTransform()},i.prototype._horizontalTransform=function(t,e){t=t||0,e=e||0;for(var n=[{x:this.position[0].x+t,y:this.position[0].y+e},{x:this.position[1].x+1+t,y:this.position[1].y+1+e},{x:this.position[2].x-2+t,y:this.position[2].y+1+e},{x:this.position[3].x-1+t,y:this.position[3].y+e}],o=0;o<n.length;o++){if(n[o].x<0)return this._horizontalTransform(++t,e);if(n[o].x>=this.cols)return this._horizontalTransform(--t,e);if(n[o].y<0)return this._horizontalTransform(t,++e);if(n[o].y>=this.rows)return this._horizontalTransform(t,--e)}return n},i.prototype._verticalTransform=function(t,e){t=t||0,e=e||0;for(var n=[{x:this.position[0].x+t,y:this.position[0].y+e},{x:this.position[1].x-1+t,y:this.position[1].y-1+e},{x:this.position[2].x+2+t,y:this.position[2].y-1+e},{x:this.position[3].x+1+t,y:this.position[3].y+e}],o=0;o<n.length;o++){if(n[o].x<0)return this._verticalTransform(++t,e);if(n[o].x>=this.cols)return this._verticalTransform(--t,e);if(n[o].y<0)return this._verticalTransform(t,++e);if(n[o].y>=this.rows)return this._verticalTransform(t,--e)}return n},i}(l.default);h.default=c},362:function(m,h,u){var r,p=this&&this.__extends||(r=function(s,i){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(s,i)},function(s,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function t(){this.constructor=s}r(s,i),s.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)});Object.defineProperty(h,"__esModule",{value:!0});var l=u(418),a=u(310),c=function(s){function i(){var t=s.call(this,a.GamePieceType.Z)||this;return t.position=[{x:t.xOffset-1,y:0},{x:t.xOffset,y:0},{x:t.xOffset,y:1},{x:t.xOffset+1,y:1}],t.nextPieceMap=[{x:0,y:0},{x:1,y:0},{x:1,y:1},{x:2,y:1}],t.nextPieceDims={rows:2,cols:3},t}return p(i,s),i.prototype.getTransform=function(){return this.position[0].y===this.position[1].y?this._verticalTransform():this._horizontalTransform()},i.prototype._horizontalTransform=function(t,e){t=t||0,e=e||0;for(var n=[{x:this.position[0].x-1+t,y:this.position[0].y+1+e},{x:this.position[1].x+t,y:this.position[1].y+e},{x:this.position[2].x+1+t,y:this.position[2].y+1+e},{x:this.position[3].x+2+t,y:this.position[3].y+e}],o=0;o<n.length;o++){if(n[o].x<0)return this._horizontalTransform(++t,e);if(n[o].x>=this.cols)return this._horizontalTransform(--t,e);if(n[o].y<0)return this._horizontalTransform(t,++e);if(n[o].y>=this.rows)return this._horizontalTransform(t,--e)}return n},i.prototype._verticalTransform=function(t,e){e=e||0,t=t||0;for(var n=[{x:this.position[0].x+1+e,y:this.position[0].y-1+t},{x:this.position[1].x+e,y:this.position[1].y+t},{x:this.position[2].x-1+e,y:this.position[2].y-1+t},{x:this.position[3].x-2+e,y:this.position[3].y+t}],o=0;o<n.length;o++){if(n[o].x<0)return this._verticalTransform(++e,t);if(n[o].x>=this.cols)return this._verticalTransform(--e,t);if(n[o].y<0)return this._verticalTransform(e,++t);if(n[o].y>=this.rows)return this._verticalTransform(e,--t)}return n},i}(l.default);h.default=c},310:(m,h,u)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.newGamePiece=h.GamePieceType=void 0;var r,p=u(489),l=u(376),a=u(362),c=u(935),s=u(146),i=u(852),t=u(465);(function(e){e[e.BLOCK=0]="BLOCK",e[e.LINE=1]="LINE",e[e.Z=2]="Z",e[e.Z_INV=3]="Z_INV",e[e.T=4]="T",e[e.L=5]="L",e[e.L_INV=6]="L_INV"})(r=h.GamePieceType||(h.GamePieceType={})),h.newGamePiece=function(){var e=Math.floor(Math.random()*Math.floor(7));switch(e){case r.BLOCK:return new p.default;case r.LINE:return new l.default;case r.Z:return new a.default;case r.Z_INV:return new c.default;case r.T:return new s.default;case r.L:return new i.default;case r.L_INV:return new t.default;default:throw Error("[tetris-ts] Invalid GamePieceType '"+e+"'")}}},234:(m,h)=>{var u;Object.defineProperty(h,"__esModule",{value:!0}),h.GameState=void 0,(u=h.GameState||(h.GameState={}))[u.INIT=0]="INIT",u[u.PLAYING=1]="PLAYING",u[u.PAUSED=2]="PAUSED",u[u.STOPPED=3]="STOPPED"},276:(m,h,u)=>{Object.defineProperty(h,"__esModule",{value:!0});var r=u(913),p=function(){function l(a,c){this.rootElement=a,this.uiElements=c}return l.prototype.createMainContainer=function(){var a=document.createElement("div");a.classList.add("container"),this.uiElements.container=a,this.rootElement.appendChild(this.uiElements.container)},l.prototype.createMenuPanel=function(a){var c=document.createElement("div");c.classList.add("panel"),c.classList.add("main-panel");var s=document.createElement("div");s.classList.add("text-center"),s.innerHTML="<h3>TETRIS-TS</h3>",c.appendChild(s);var i=document.createElement("div");i.classList.add("controls");var t=document.createElement("div");t.innerHTML="CONTROLS",t.classList.add("label"),i.appendChild(t),this.uiElements.controls=i,this.createControlTable(),c.appendChild(i);var e=document.createElement("div");e.classList.add("text-center"),e.innerHTML="<div class='button'>PLAY</div>",this.uiElements.playButton=e,e.onclick=function(){a()},c.appendChild(e),this.uiElements.mainPanel=c,this.uiElements.container.appendChild(this.uiElements.mainPanel)},l.prototype.createControlTable=function(){var a=document.createElement("table");a.classList.add("control-table"),[{name:"LEFT ARROW",desc:"MOVE LEFT"},{name:"RIGHT ARROW",desc:"MOVE RIGHT"},{name:"DOWN ARROW",desc:"MOVE DOWN"},{name:"UP ARROW",desc:"ROTATE"},{name:"ENTER",desc:"DROP"},{name:"SPACE",desc:"PAUSE"},{name:"ESC",desc:"QUIT"}].forEach(function(c){var s=document.createElement("tr"),i=document.createElement("td");i.innerHTML=c.name,s.appendChild(i);var t=document.createElement("td");t.innerHTML=c.desc,s.appendChild(t),a.appendChild(s)}),this.uiElements.controls.appendChild(a)},l.prototype.createGamePanel=function(){var a=document.createElement("div");a.classList.add("panel"),a.classList.add("game-panel"),this.uiElements.gamePanel=a,this.uiElements.container.appendChild(this.uiElements.gamePanel),this.createStatsPanel(),this.createGameBoard()},l.prototype.createStatsPanel=function(){var a=document.createElement("div");a.classList.add("stats-panel");var c=document.createElement("div");c.classList.add("stats-label"),c.innerHTML="POINTS",a.appendChild(c);var s=document.createElement("div");s.classList.add("stats-value"),this.uiElements.points=s,a.appendChild(s);var i=document.createElement("div");i.classList.add("stats-label"),i.innerHTML="LINES",a.appendChild(i);var t=document.createElement("div");t.classList.add("stats-value"),this.uiElements.lines=t,a.appendChild(t);var e=document.createElement("div");e.classList.add("stats-label"),e.innerHTML="LEVEL",a.appendChild(e);var n=document.createElement("div");n.classList.add("stats-value"),this.uiElements.level=n,a.appendChild(n),this.uiElements.statsPanel=a,this.uiElements.container.appendChild(a),this.createNextPieceContainer()},l.prototype.createNextPieceContainer=function(){var a=this.uiElements.statsPanel.clientWidth-30,c=document.createElement("div");c.classList.add("next-piece-container"),c.setAttribute("style","height: "+a+"px; width: "+a),this.uiElements.nextPieceContainer=c,this.uiElements.statsPanel.appendChild(c)},l.prototype.createGameBoard=function(){var a=document.createElement("div");a.classList.add("game-board"),this.uiElements.gameBoard=a,this.uiElements.gamePanel.appendChild(this.uiElements.gameBoard),this.createGameBoardSpaces()},l.prototype.createGameBoardSpaces=function(){for(var a=0;a<r.GAME_ROWS;a++){var c=document.createElement("div");c.classList.add("game-row"),c.style.cssText="height: "+this.uiElements.gameBoard.clientWidth/r.GAME_COLS+"px;";for(var s=0;s<r.GAME_COLS;s++){var i=document.createElement("div");i.classList.add("game-space"),c.appendChild(i)}this.uiElements.gameBoard.appendChild(c)}},l.prototype.createNextPieceSpaces=function(a,c){for(var s=this.uiElements.statsPanel.clientWidth-30,i=0;i<a;i++){var t=document.createElement("div");t.setAttribute("style","line-height: "+s/4+"px");for(var e=0;e<c;e++){var n=document.createElement("div");n.classList.add("next-piece-cell"),n.setAttribute("style","height: "+s/5+`px; 
                    width: `+s/5+"px;"),t.appendChild(n)}this.uiElements.nextPiece.appendChild(t)}},l.prototype.drawGamePiece=function(a){var c=this;a.position.forEach(function(s){var i=c.uiElements.gameBoard.children[s.y].children[s.x];i.classList.add("game-piece"),i.setAttribute("style","background-color: "+a.color.color+"; border-color: "+a.color.border+";")})},l.prototype.eraseGamePiece=function(a){var c=this;a.position.forEach(function(s){var i=c.uiElements.gameBoard.children[s.y].children[s.x];i.classList.remove("game-piece"),i.setAttribute("style","")})},l.prototype.drawRow=function(){var a=document.createElement("div");a.classList.add("game-row"),a.style.cssText="height: "+this.uiElements.gameBoard.clientWidth/r.GAME_COLS+"px;";for(var c=0;c<r.GAME_COLS;c++){var s=document.createElement("div");s.classList.add("game-space"),a.appendChild(s)}this.uiElements.gameBoard.insertBefore(a,this.uiElements.gameBoard.children[0])},l.prototype.removeRow=function(a){var c=this;a.forEach(function(s){c.uiElements.gameBoard.children[s].remove(),c.drawRow()})},l.prototype.drawNextPiece=function(a){this.uiElements.nextPiece&&this.uiElements.nextPieceContainer.removeChild(this.uiElements.nextPiece);var c=document.createElement("div");this.uiElements.nextPiece=c,this.createNextPieceSpaces(a.nextPieceDims.rows,a.nextPieceDims.cols),this.setNextPieceActive(a.nextPieceMap,a.color),this.uiElements.nextPieceContainer.appendChild(c)},l.prototype.setNextPieceActive=function(a,c){var s=this.uiElements.nextPiece;a.forEach(function(i){var t=s.children[i.y].children[i.x];t.setAttribute("style",t.getAttribute("style")+" background-color: "+c.color+"; border-color: "+c.border+";")})},l.prototype.updatePoints=function(a){this.uiElements.points.innerHTML=a.toString()},l.prototype.updateLines=function(a){this.uiElements.lines.innerHTML=a.toString()},l.prototype.updateLevel=function(a){this.uiElements.level.innerHTML=a.toString()},l}();h.default=p},101:(m,h,u)=>{Object.defineProperty(h,"__esModule",{value:!0});var r=u(234),p=u(549),l=u(276);u(323);var a=function(){function c(s){console.log("[tetris-ts] rootElement dimensions "+s.clientWidth+"x"+s.clientHeight),this.rootElement=s,this.uiElements={},this.render=new l.default(this.rootElement,this.uiElements),this.eventBus=p.EventBus.getInstance(),this.createInputListeners(),this.setupEventHandlers(),this.gameState=r.GameState.INIT}return c.prototype.createInputListeners=function(){var s=this;document.addEventListener("keydown",function(i){switch(i.preventDefault(),i.code){case"ArrowLeft":s.eventBus.publish({event:"INPUT_LEFT"});break;case"ArrowRight":s.eventBus.publish({event:"INPUT_RIGHT"});break;case"ArrowDown":s.eventBus.publish({event:"INPUT_DOWN"});break;case"ArrowUp":s.eventBus.publish({event:"INPUT_UP"});break;case"Enter":s.eventBus.publish({event:"INPUT_ENTER"});break;case"Space":s.eventBus.publish({event:"INPUT_SPACE"});break;case"Escape":s.eventBus.publish({event:"INPUT_ESC"})}})},c.prototype.setupEventHandlers=function(){var s=this;this.eventBus.subscribe("INIT",function(){s.createMainMenu()}),this.eventBus.subscribe("PLAY_CLICK",function(){s.playClickHandler()}),this.eventBus.subscribe("DRAW_ACTIVE",function(i){s.gameState!==r.GameState.PLAYING&&s.gameState!==r.GameState.PAUSED||s.render.drawGamePiece(i.gamePiece)}),this.eventBus.subscribe("ERASE_ACTIVE",function(i){s.gameState!==r.GameState.PLAYING&&s.gameState!==r.GameState.PAUSED||s.render.eraseGamePiece(i.gamePiece)}),this.eventBus.subscribe("REMOVE_ROWS",function(i){s.gameState!==r.GameState.PLAYING&&s.gameState!==r.GameState.PAUSED||s.render.removeRow(i.rows)}),this.eventBus.subscribe("UPDATE_POINTS",function(i){s.render.updatePoints(i.value)}),this.eventBus.subscribe("UPDATE_LINES",function(i){s.render.updateLines(i.value)}),this.eventBus.subscribe("UPDATE_LEVEL",function(i){s.render.updateLevel(i.value)}),this.eventBus.subscribe("DRAW_NEXT",function(i){s.gameState!==r.GameState.PLAYING&&s.gameState!==r.GameState.PAUSED||s.render.drawNextPiece(i.gamePiece)}),this.eventBus.subscribe("INPUT_SPACE",this.inputSpaceHandler.bind(this)),this.eventBus.subscribe("INPUT_ESC",function(){s.resetUI()})},c.prototype.playClickHandler=function(){this.gameState=r.GameState.PLAYING,this.createGameBoard()},c.prototype.inputSpaceHandler=function(){switch(this.gameState){case r.GameState.PLAYING:this.togglePause(),this.gameState=r.GameState.PAUSED;break;case r.GameState.PAUSED:this.togglePause(),this.gameState=r.GameState.PLAYING}},c.prototype.createMainMenu=function(){var s=this;this.render.createMainContainer(),this.render.createMenuPanel(function(){s.eventBus.publish({event:"PLAY_CLICK"})}),this.eventBus.publish({event:"UI_READY"})},c.prototype.createGameBoard=function(){this.uiElements.container.removeChild(this.uiElements.mainPanel),this.render.createGamePanel(),this.eventBus.publish({event:"PLAY"})},c.prototype.resetUI=function(){var s=this;this.gameState=r.GameState.STOPPED,this.rootElement.innerHTML="",Object.keys(this.uiElements).forEach(function(i){delete s.uiElements[i]}),this.createMainMenu()},c.prototype.togglePause=function(){this.gameState===r.GameState.PLAYING?this.uiElements.container.classList.add("paused"):this.uiElements.container.classList.remove("paused")},c}();h.default=a}},g={};function E(m){var h=g[m];if(h!==void 0)return h.exports;var u=g[m]={id:m,exports:{}};return S[m].call(u.exports,u,u.exports,E),u.exports}E.n=m=>{var h=m&&m.__esModule?()=>m.default:()=>m;return E.d(h,{a:h}),h},E.d=(m,h)=>{for(var u in h)E.o(h,u)&&!E.o(m,u)&&Object.defineProperty(m,u,{enumerable:!0,get:h[u]})},E.o=(m,h)=>Object.prototype.hasOwnProperty.call(m,h),E.r=m=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})};var O={};return(()=>{var m=O;Object.defineProperty(m,"__esModule",{value:!0});var h=E(549),u=E(629),r=E(101);m.default=function(p,l,a){if(!p)throw new Error("[tetris-ts] No DOM Element provided.");this.eventBus=h.EventBus.getInstance(),this.gameEngine=new u.default(l,a),this.uiEngine=new r.default(p),this.eventBus.publish({event:"INIT"})}})(),O})()})})(R);const D=B(A),j=N({__proto__:null,default:D},[A]);export{j as t};
